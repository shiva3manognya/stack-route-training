<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="d3.js." charset="utf-8"></script>
    <script src="d3.min.js." charset="utf-8"></script>
    	<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>

   <style>



   </style>
</head>
<body>
<h1>ddfdfd</h1>

        <script type="text/javascript">

             d3.json('plot1.json',function(json){

                       var data=json.agedist;
                       width=1200; height=400;

                       var x = d3.scale.ordinal()
                                  .rangeRoundBands([0, width], .1);
                                  
                       var y = d3.scale.linear()
                                .range([height, 0]);

                       var canvas= d3.select("body").append("svg")
                                     .attr("width",width)
                                     .attr("height",height)
                                     .attr("fill","blue")
                                     .append("g")




                       var max_n = 0;
                 			 for (var d in data) {
                 				max_n = Math.max(data[d].pop, max_n);
                 			}

                        y.domain([0, max_n]);
                        var yAxis = d3.svg.axis()
                                      .scale(y)
                                      .orient("left");

                        canvas.append("g")
                            .attr("class", "y axis")
                            .call(yAxis);

                 			var dx = width / data.length;

                      canvas.selectAll("rect")
                            .data(data)
                            .enter()
                                .append("rect")
                                .attr("height", function(d) { return height-y(d.pop); })
                                .attr("width", dx/1.5 )
                                .attr("y", function(d) { return y(d.pop); })
                                .attr("x", function(d,i) { return (i*dx); })
                                .attr("fill","red")
                                .attr("transform","translate(60,0)")

                    canvas.append("text")

                                .attr("y", height)
                                .attr("x", dx/2 )
                                .attr("dy", ".75em")
                                .text( function(d) { return x(d.age); })




                                           })

        </script>
</body>




</html>


<!-- <script type="text/javascript">

var w = 500,
h = 100;

var svg = d3.select("#chart")
.append("svg")
.attr("width", w)
.attr("height", h);

d3.json("plot1.json", function(json) {

var data = json.agedist;

var max_n = 0;
for (var d in data) {
max_n = Math.max(data[d].pop, max_n);
}

var dx = w / max_n;
var dy = h / data.length;

// bars
svg.selectAll("rect")
.data(data)
.enter()
.append("rect")
//	.attr("class", function(d, i) {return "bar " + d.age;})
.attr("x", function(d, i) {return 0;})
.attr("y", function(d, i) {return dy*i;})
.attr("width", function(d, i) {return d.pop})
.attr("height", dy);
});
</script>  -->
